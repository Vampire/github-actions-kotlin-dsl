# This file was generated using Kotlin DSL (.github/workflows/script-with-server.main.kts).
# If you want to modify the workflow, please change the Kotlin file and regenerate this YAML file.
# Generated with https://github.com/krzema12/github-actions-kotlin-dsl

name: Script with server

on:
  push:

jobs:
  "some-job":
    runs-on: "ubuntu-latest"
    steps:
      - id: step-0
        name: Checkout
        uses: actions/checkout@v3
      - id: step-1
        name: Start server in background
        run: .github/workflows/script-with-server.main.kts &
      - id: step-2
        name: Wait for the server to start
        run: while netstat -lnt | awk '$4 ~ /:8123$/ {exit 1}'; do sleep 1; done
      - id: step-3
        name: Call the server
        run: curl http://localhost:8123/action-logic/0
      - id: step-4
        name: Read written file
        run: cat output.txt